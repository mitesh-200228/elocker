(function(){var e={3812:function(e,t,a){"use strict";var s=a(9963),o=a(6252);const n={id:"wrapper"};function r(e,t,a,s,r,i){const l=(0,o.up)("router-view"),c=(0,o.up)("base-layout");return(0,o.wg)(),(0,o.iD)("div",n,[e.$route.href?.startsWith("/auth")?((0,o.wg)(),(0,o.j4)(l,{key:0})):((0,o.wg)(),(0,o.j4)(c,{key:1},{default:(0,o.w5)((()=>[(0,o.Wm)(l)])),_:1}))])}const i={class:"content-page"},l={class:"content"},c={class:"container-fluid mobile-wrap"};function d(e,t,a,s,n,r){const d=(0,o.up)("TopbarView"),u=(0,o.up)("SidebarView");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(d),(0,o.Wm)(u),(0,o._)("div",i,[(0,o._)("div",l,[(0,o._)("div",c,[(0,o.WI)(e.$slots,"default")])])])],64)}var u=a(3577),p=a.p+"img/logo.a9ff3a06.svg";const m=e=>((0,o.dD)("data-v-ddc40c4c"),e=e(),(0,o.Cn)(),e),f={class:"navbar-custom"},h={class:"container-fluid"},g={class:"topbar-wrapper"},b={class:"toggle"},v=m((()=>(0,o._)("i",{class:"bi bi-list"},null,-1))),w=[v],k=m((()=>(0,o._)("div",{class:"logo-box"},[(0,o._)("a",{class:"logo logo-light text-center"},[(0,o._)("img",{src:p,class:"me-1"}),(0,o._)("span",{class:"logo-lg-text-light"},"R2 Explorer")])],-1))),y={class:"topbar-menu d-flex align-items-center"},_={key:0,class:"dropdown"},$={class:"btn btn-toggle dropdown-toggle waves-effect waves-light btn-user","data-bs-toggle":"dropdown"},x=m((()=>(0,o._)("i",{class:"bi bi-person-fill"},null,-1))),D={class:"ms-1 d-none d-lg-inline-block"},F=m((()=>(0,o._)("i",{class:"mdi mdi-chevron-down"},null,-1))),T={class:"dropdown-menu dropdown-menu-end profile-dropdown",style:{position:"absolute",inset:"0px 0px auto auto",margin:"0px",transform:"translate3d(0px, 72px, 0px)"},"data-popper-placement":"bottom-end"},C=m((()=>(0,o._)("i",{class:"bi bi-box-arrow-right"},null,-1))),M=m((()=>(0,o._)("span",null,"Logout",-1))),U=[C,M];function j(e,t,a,s,n,r){return(0,o.wg)(),(0,o.iD)("div",f,[(0,o._)("div",h,[(0,o._)("div",g,[(0,o._)("div",b,[(0,o._)("button",{class:"btn btn-toggle",onClick:t[0]||(t[0]=t=>e.$store.commit("toggleMobileSidebar"))},w)]),k,(0,o._)("ul",y,[e.$store.state.user?.username?((0,o.wg)(),(0,o.iD)("li",_,[(0,o._)("button",$,[x,(0,o._)("span",D,[(0,o.Uk)((0,u.zw)(e.$store.state.user.username)+" ",1),F])]),(0,o._)("div",T,[(0,o._)("a",{href:"#",onClick:t[1]||(t[1]=(...e)=>r.logout&&r.logout(...e)),class:"dropdown-item notify-item"},U)])])):(0,o.kq)("",!0)])])])])}var I={methods:{logout(){"basic"===this.$store.state.loginMethod?(localStorage.removeItem("basicAuth"),location.reload()):window.location.href="/cdn-cgi/access/logout"}}},O=a(3744);const S=(0,O.Z)(I,[["render",j],["__scopeId","data-v-ddc40c4c"]]);var H=S;const z=e=>((0,o.dD)("data-v-f6a5e28c"),e=e(),(0,o.Cn)(),e),B={id:"sidebar-menu",class:"h-100"},L={id:"side-menu",class:"h-100"},E={key:0},P={key:0,type:"button",class:"btn btn-danger w-100 waves-effect waves-light dropdown-toggle","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:!0},A=z((()=>(0,o._)("i",{class:"bi bi-x-circle-fill me-1"},null,-1))),W=(0,o.Uk)(" Readonly Mode "),Y=[A,W],q={key:1,class:"btn-group d-block mb-2"},Z=["disabled"],R=z((()=>(0,o._)("i",{class:"bi bi-plus-circle-fill me-1"},null,-1))),N=(0,o.Uk)(" New "),V=[R,N],K={class:"dropdown-menu font-16 w-100"},J=z((()=>(0,o._)("i",{class:"bi bi-folder-plus me-1"},null,-1))),G=(0,o.Uk)(" New Folder "),X=[J,G],Q=z((()=>(0,o._)("div",{class:"dropdown-divider"},null,-1))),ee=z((()=>(0,o._)("i",{class:"bi bi-file-earmark-arrow-up me-1"},null,-1))),te=(0,o.Uk)(" Upload Files "),ae=[ee,te],se=z((()=>(0,o._)("i",{class:"bi bi-folder2-open me-1"},null,-1))),oe=(0,o.Uk)(" Upload Folders "),ne=[se,oe],re=z((()=>(0,o._)("li",{class:"menu-title mt-2"},"Buckets",-1))),ie=z((()=>(0,o._)("i",{class:"bi bi-archive me-2"},null,-1))),le=z((()=>(0,o._)("i",{class:"bi bi-archive me-2"},null,-1))),ce=z((()=>(0,o._)("li",{class:"menu-title info"},"Info",-1))),de=z((()=>(0,o._)("li",null,[(0,o._)("a",{target:"_blank",href:"https://github.com/G4brym/R2-Explorer/issues/new"},[(0,o._)("i",{class:"bi bi-info-square-fill me-2"}),(0,o._)("span",null,"Provide Feedback")])],-1))),ue={key:1},pe=["href"],me=z((()=>(0,o._)("i",{class:"bi bi-cloud-download-fill me-2"},null,-1))),fe=z((()=>(0,o._)("span",null,"Update Available",-1))),he=[me,fe],ge=z((()=>(0,o._)("div",{class:"clearfix"},null,-1)));function be(e,t,a,s,n,r){const i=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",{class:(0,u.C_)(["left-side-menu",{active:e.$store.state.mobileSidebar}])},[(0,o._)("div",B,[(0,o._)("ul",L,["storage"===e.$store.state.activeTab?((0,o.wg)(),(0,o.iD)("li",E,[e.$store.state.config?.readonly?((0,o.wg)(),(0,o.iD)("button",P,Y)):((0,o.wg)(),(0,o.iD)("div",q,[(0,o._)("button",{type:"button",class:"btn btn-success w-100 waves-effect waves-light dropdown-toggle","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:!0===e.$store.state.config?.readonly},V,8,Z),(0,o._)("div",K,[(0,o._)("a",{class:"dropdown-item pointer",onClick:t[0]||(t[0]=e=>r.EventBus().$emit("newFolder"))},X),Q,(0,o._)("a",{class:"dropdown-item pointer",onClick:t[1]||(t[1]=e=>r.EventBus().$emit("openFilesUploader"))},ae),(0,o._)("a",{class:"dropdown-item pointer",onClick:t[2]||(t[2]=e=>r.EventBus().$emit("openFoldersUploader"))},ne)])]))])):(0,o.kq)("",!0),re,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.$store.state.buckets,(t=>((0,o.wg)(),(0,o.iD)("li",{key:t.name},["email"===e.$store.state.activeTab?((0,o.wg)(),(0,o.j4)(i,{key:0,class:(0,u.C_)([{"text-black":e.$store.state.activeBucket===t.name},"list-group-item border-0"]),to:{name:"email-folder",params:{bucket:t.name,folder:"inbox"}}},{default:(0,o.w5)((()=>[ie,(0,o._)("span",null,(0,u.zw)(t.name),1)])),_:2},1032,["class","to"])):((0,o.wg)(),(0,o.j4)(i,{key:1,class:(0,u.C_)([{"text-black":e.$store.state.activeBucket===t.name},"list-group-item border-0"]),to:{name:`${e.$store.state.activeTab}-home`,params:{bucket:t.name}}},{default:(0,o.w5)((()=>[le,(0,o._)("span",null,(0,u.zw)(t.name),1)])),_:2},1032,["class","to"]))])))),128)),ce,de,e.updateAvailable?((0,o.wg)(),(0,o.iD)("li",ue,[(0,o._)("a",{target:"_blank",href:e.updateUrl},he,8,pe)])):(0,o.kq)("",!0)])]),ge],2)}var ve=a(9669),we=a.n(ve);class ke{constructor(){this.eventListeners=new Map}registerEventListener(e,t,a=!1){this.eventListeners.has(e)||this.eventListeners.set(e,[]);const s=this.eventListeners.get(e);s.push({callback:t,once:a})}$on(e,t){this.registerEventListener(e,t)}$once(e,t){const a=!0;this.registerEventListener(e,t,a)}$off(e,t){const a=Array.isArray(e)?e:[e];for(const s of a){const e=this.eventListeners.get(s);if(void 0!==e)if("function"===typeof t)for(let a=e.length-1;a>=0;a--)e[a].callback===t&&e.splice(a,1);else this.eventListeners.delete(s)}}$emit(e,...t){if(!this.eventListeners.has(e))return;const a=this.eventListeners.get(e),s=[];for(const[o,n]of a.entries())n.callback(...t),n.once&&s.push(o);for(let o=s.length-1;o>=0;o--)a.splice(s[o],1)}}const ye=new ke;var _e=ye,$e={methods:{EventBus(){return _e}},data:function(){return{updateAvailable:!1,updateUrl:"https://github.com/G4brym/R2-Explorer"}},created(){const e=this;function t(e){return e.replace("v","")}function a(e,t){return 1===t.localeCompare(e,void 0,{numeric:!0,sensitivity:"base"})}we().get("https://api.r2explorer.dev/api/releases/latest/").then((s=>{this.$watch((()=>e.$store.state.serverVersion),(o=>{e.updateAvailable=a(t(o),t(s.data?.latest_version?.version)),e.updateAvailable&&s.data?.latest_version?.url&&(e.updateUrl=s.data?.latest_version?.url)}))}))}};const xe=(0,O.Z)($e,[["render",be],["__scopeId","data-v-f6a5e28c"]]);var De=xe,Fe={components:{TopbarView:H,SidebarView:De}};const Te=(0,O.Z)(Fe,[["render",d]]);var Ce=Te,Me={components:{BaseLayout:Ce},async created(){await this.$store.dispatch("checkBasicAuthStorage"),this.$store.dispatch("loadServerConfigs"),this.$store.dispatch("loadUserDisks")}};const Ue=(0,O.Z)(Me,[["render",r]]);var je=Ue,Ie=a(2119);const Oe={class:"card-body"},Se=(0,o._)("div",{class:"clearfix"},null,-1);function He(e,t,a,s,n,r){const i=(0,o.up)("gallery"),l=(0,o.up)("drag-and-drop"),c=(0,o.up)("loading"),d=(0,o.up)("UploadingPopup"),u=(0,o.up)("bucket-explorer-wrapper");return(0,o.wg)(),(0,o.j4)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,{ref:"uploader"},{default:(0,o.w5)((()=>[(0,o._)("div",Oe,[e.$store.state.files&&e.$store.state.folders?((0,o.wg)(),(0,o.j4)(i,{key:0})):(0,o.kq)("",!0),Se])])),_:1},512),(0,o.Wm)(c),(0,o.Wm)(d)])),_:1})}var ze=a(6455),Be=a.n(ze);const Le={class:"mobile-adjust"},Ee={class:"mt-3"};function Pe(e,t,a,s,n,r){const i=(0,o.up)("folders"),l=(0,o.up)("files");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",Le,[(0,o.Wm)(i)]),(0,o._)("div",Ee,[(0,o.Wm)(l)])],64)}const Ae={key:0,class:"mb-2"},We={class:"row mx-n1 g-0"},Ye={class:"p-2"},qe={class:"row align-items-center"},Ze=(0,o._)("div",{class:"col-auto pe-0"},[(0,o._)("div",{class:"avatar-sm"},[(0,o._)("span",{class:"avatar-title text-secondary rounded"},[(0,o._)("i",{class:"bi bi-folder-fill font-24 text-warning"})])])],-1),Re={class:"col"},Ne=["textContent"];function Ve(e,t,a,n,r,i){const l=(0,o.up)("router-link"),c=(0,o.up)("context-menu");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.$store.state.folders.length>0?((0,o.wg)(),(0,o.iD)("h5",Ae,"Folders")):(0,o.kq)("",!0),(0,o._)("div",We,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.$store.state.folders,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"col-xl-3 col-lg-6",key:t.Prefix},[(0,o.Wm)(l,{class:"card m-1 shadow-none border folder",onContextmenu:(0,s.iM)((e=>i.openMenu(e,t)),["prevent"]),to:{name:"storage-folder",params:{bucket:e.$route.params.bucket,folder:t.hash}}},{default:(0,o.w5)((()=>[(0,o._)("div",Ye,[(0,o._)("div",qe,[Ze,(0,o._)("div",Re,[(0,o._)("a",{class:"fw-bold",textContent:(0,u.zw)(t.name)},null,8,Ne)])])])])),_:2},1032,["onContextmenu","to"])])))),128))]),(0,o.Wm)(c,{ref:"menu",onOpenFile:i.openFolder},null,8,["onOpenFile"])],64)}const Ke=e=>((0,o.dD)("data-v-642faa9f"),e=e(),(0,o.Cn)(),e),Je=Ke((()=>(0,o._)("i",{class:"bi bi-box-arrow-in-right me-1"},null,-1))),Ge=(0,o.Uk)("Open"),Xe=[Je,Ge],Qe=Ke((()=>(0,o._)("i",{class:"bi bi-share-fill me-1"},null,-1))),et=(0,o.Uk)("Get Sharable Link "),tt=[Qe,et],at=Ke((()=>(0,o._)("i",{class:"bi bi-pencil-fill me-1"},null,-1))),st=(0,o.Uk)("Rename "),ot=[at,st],nt=Ke((()=>(0,o._)("i",{class:"bi bi-cloud-download-fill me-1"},null,-1))),rt=(0,o.Uk)("Download "),it=[nt,rt],lt=Ke((()=>(0,o._)("i",{class:"bi bi-trash-fill me-1"},null,-1))),ct=(0,o.Uk)("Remove "),dt=[lt,ct];function ut(e,t,a,s,n,r){return e.viewMenu?((0,o.wg)(),(0,o.iD)("ul",{key:0,id:"right-click-menu",ref:"menu",tabindex:"-1",onBlur:t[5]||(t[5]=(...e)=>r.closeMenu&&r.closeMenu(...e)),style:(0,u.j5)({top:e.top,left:e.left})},[e.canPreview?((0,o.wg)(),(0,o.iD)("li",{key:0,class:"pointer",onClick:t[0]||(t[0]=(...e)=>r.openFile&&r.openFile(...e))},Xe)):(0,o.kq)("",!0),this.file?.isFile?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o._)("li",{class:"pointer",onClick:t[1]||(t[1]=(...e)=>r.shareFile&&r.shareFile(...e))},tt),(0,o._)("li",{class:"pointer",onClick:t[2]||(t[2]=(...e)=>r.renameFile&&r.renameFile(...e))},ot),(0,o._)("li",{class:"pointer",onClick:t[3]||(t[3]=(...e)=>r.downloadFile&&r.downloadFile(...e))},it),(0,o._)("li",{class:"pointer",onClick:t[4]||(t[4]=(...e)=>r.deleteFile&&r.deleteFile(...e))},dt)],64)):(0,o.kq)("",!0)],36)):(0,o.kq)("",!0)}var pt=a(3907),mt=(0,pt.MT)({state:{user:{username:"test@example.com"},config:{},activeBucket:null,currentFolder:"",files:[],folders:[],buckets:[],toastMessage:null,toastSpin:!1,uploadingFiles:{},mobileSidebar:!1,serverVersion:null,serverVersionInt:0,activeTab:"storage",serverUrl:null,loginMethod:null},getters:{},mutations:{setServerUrl(e,t){e.serverUrl=t},loadObjects(e,t){e.files=t.files,e.folders=t.folders},toggleMobileSidebar(e,t){e.mobileSidebar=!0!==t&&!1!==t?!e.mobileSidebar:t},changeBucket(e,t){e.activeBucket=t,"email"===this.state.activeTab?e.currentFolder="inbox":e.currentFolder=""},changeTab(e,t){t!==e.activeTab&&(e.activeTab=t,e.currentFolder="")},goTo(e,t){e.currentFolder=t},loadUserDisks(e,t){if(e.buckets=t.buckets,null===e.activeBucket&&t.buckets.length>0||Yr.currentRoute.value.href.startsWith("/auth")){const e=location.pathname.startsWith("/email")?"email-home":"storage-home",a=localStorage.getItem("lastOpenTab");if(a&&"/"===location.pathname)return void Yr.push(JSON.parse(a));Yr.push({name:e,params:{bucket:t.buckets[0].name}})}},loadServerConfigs(e,t){e.user=t.user,e.config=t.config,e.serverVersion=t.version,e.serverVersionInt=parseInt(t.version.replace("v","").replaceAll(".",""))},changeToastMessage(e,{message:t,spin:a}){e.toastMessage=t,e.toastSpin=a||!1},addUploadingFiles(e,t){for(const a of t)e.uploadingFiles[a]={}},clearUploadingFiles(e){e.uploadingFiles={}},setUploadProgress(e,{filename:t,progress:a}){void 0!==e.uploadingFiles[t]&&(e.uploadingFiles[t].progress=Math.ceil(a))}},actions:{makeToast(e,{message:t,timeout:a,spin:s}){e.commit("changeToastMessage",{message:t,spin:s}),null!==a&&void 0!==a&&setTimeout((()=>{e.commit("changeToastMessage",{message:null,spin:!1})}),a)},async navigate(e,t){"/"===t&&(t=""),e.commit("goTo",t),await e.dispatch("refreshObjects")},navigateToHash(e,t){t=decodeURIComponent(escape(atob(t))),e.dispatch("navigate",t)},addUploadingFiles(e,t){e.commit("addUploadingFiles",t)},clearUploadingFiles(e,t){e.commit("clearUploadingFiles")},setUploadProgress(e,{filename:t,progress:a}){e.commit("setUploadProgress",{filename:t,progress:a})},loadUserDisks({commit:e}){we().get("/api/buckets").then((t=>{e("loadUserDisks",t.data)}))},async tryLogin(e,t){const a="Basic "+btoa(t.username+":"+t.password);let s;try{s=await we().get("/api/server/config",{headers:{Authorization:a},validateStatus:function(e){return e>=200&&e<300}})}catch(o){if(console.log(o),302===o.response.status){const e=o.response.headers.Location;e&&window.location.replace(e)}}if(200!==s?.status)return"Invalid username or password";we().defaults.headers.common.Authorization=a,localStorage.setItem("basicAuth",a),e.state.loginMethod="basic",e.commit("loadServerConfigs",s.data),e.dispatch("loadUserDisks")},async checkBasicAuthStorage(e){const t=localStorage.getItem("basicAuth");t&&(we().defaults.headers.common.Authorization=t,e.state.loginMethod="basic")},loadServerConfigs({commit:e}){we().get("/api/server/config",{validateStatus:function(e){return e>=200&&e<300}}).then((t=>{e("loadServerConfigs",t.data)})).catch((function(e){if(console.log(e),401===e.response?.status)Yr.push({name:"login"});else if(302===e.response.status){const t=e.response.headers.Location;t&&window.location.replace(t)}}))},async refreshObjects({commit:e}){await e("loadObjects",await wt.listObjects())}},modules:{}});const ft=[{extensions:["png","jpg","jpeg","webp"],type:"image",downloadType:"objectUrl"},{extensions:["mp3"],type:"audio",downloadType:"objectUrl"},{extensions:["mp4","ogg"],type:"video",downloadType:"objectUrl"},{extensions:["pdf"],type:"pdf",downloadType:"objectUrl"},{extensions:["txt"],type:"text",downloadType:"text"},{extensions:["md"],type:"markdown",downloadType:"text"},{extensions:["csv"],type:"csv",downloadType:"text"},{extensions:["json"],type:"json",downloadType:"text"},{extensions:["html"],type:"html",downloadType:"text"},{extensions:["log.gz"],type:"logs",downloadType:"blob"},{extensions:["eml"],type:"email",downloadType:"text"}];var ht={getType:e=>{for(const t of ft)for(const a of t.extensions)if(e.endsWith(a))return{type:t.type,downloadType:t.downloadType}}};function gt(e,t=null){return t?btoa(unescape(encodeURIComponent(`${t}${e}`))):btoa(unescape(encodeURIComponent(e)))}function bt(){let e=mt.state.currentFolder;return"email"===mt.state.activeTab&&(e=".r2-explorer/emails/"+mt.state.currentFolder+"/"),e}const vt={createFolder:e=>{const t=mt.state.currentFolder+e+"/";return we().post(`/api/buckets/${mt.state.activeBucket}/folder`,{key:gt(t)})},deleteObject:(e,t)=>we().post(`/api/buckets/${mt.state.activeBucket}/delete`,{key:gt(t,e)}),downloadFile:(e,t,a)=>{const s={};"objectUrl"!==e.preview?.downloadType&&"blob"!==e.preview?.downloadType||(s.responseType="arraybuffer"),a&&(s.signal=a.signal),t&&(s.onDownloadProgress=t);const o=gt(e.name,bt());return we().get(`/api/buckets/${mt.state.activeBucket}/${o}`,s)},renameObject:(e,t)=>we().post(`/api/buckets/${mt.state.activeBucket}/move`,{oldKey:gt(e,mt.state.currentFolder),newKey:gt(t,mt.state.currentFolder)}),updateMetadata:(e,t)=>{const a=gt(e.name,bt());return we().post(`/api/buckets/${mt.state.activeBucket}/${a}`,{customMetadata:t})},multipartCreate:(e,t)=>we().post(`/api/buckets/${mt.state.activeBucket}/multipart/create`,null,{params:{key:gt(e.name,t),httpMetadata:gt(JSON.stringify({contentType:e.type}))}}),multipartComplete:(e,t,a,s)=>we().post(`/api/buckets/${mt.state.activeBucket}/multipart/complete`,{key:gt(e.name,t),uploadId:s,parts:a}),multipartUpload:(e,t,a,s,o)=>we().post(`/api/buckets/${mt.state.activeBucket}/multipart/upload`,s,{params:{key:gt(a),uploadId:e,partNumber:t},onUploadProgress:o,headers:{"Content-Type":"multipart/form-data"}}),uploadObjects:(e,t,a)=>(t=t||mt.state.currentFolder,we().post(`/api/buckets/${mt.state.activeBucket}/upload`,e,{params:{key:gt(e.name,t),httpMetadata:gt(JSON.stringify({contentType:e.type}))},headers:{"Content-Type":"multipart/form-data"},onUploadProgress:a})),listObjects:async()=>{const e=bt();let t=[],a=[],s=!0,o=null;while(s){const n=await we().get(`/api/buckets/${mt.state.activeBucket}?include=customMetadata&include=httpMetadata`,{params:{delimiter:"/",prefix:gt(e),cursor:o}});s=n.data.truncated,o=n.data.cursor;let r=[];if(n.data.objects){r=n.data.objects.filter((function(e){return!e.key.endsWith("/")})),r=r.map((function(t){const a=t.key.replace(e,""),s=a.split(".").pop();return{...t,name:a,path:mt.state.currentFolder,extension:s,preview:ht.getType(a),isFile:!0,hash:gt(a)}})).filter((e=>!(!0!==mt.state.config?.showHiddenFiles&&e.name.startsWith("."))));for(const e of r)t.push(e)}let i=[];if(n.data.delimitedPrefixes){i=n.data.delimitedPrefixes.map((function(e){const t=e.split("/"),a=t[t.length-2];return{name:a,path:mt.state.currentFolder,key:e,isFolder:!0,hash:gt(e)}})).filter((e=>!(!0!==mt.state.config?.showHiddenFiles&&e.name.startsWith("."))));for(const e of i)a.push(e)}}return{files:t.reverse(),folders:a}}};var wt=vt,kt={data:function(){return{file:void 0,canPreview:!1,viewMenu:!1,top:"0px",left:"0px",downloadUrl:"",name:""}},methods:{setMenu:function(e,t){const a=window.innerHeight-this.$refs.menu.offsetHeight-25,s=window.innerWidth-this.$refs.menu.offsetWidth-25;e>a&&(e=a),t>s&&(t=s),this.top=e+"px",this.left=t+"px"},closeMenu:function(){this.viewMenu=!1},downloadFile:function(){const e=document.createElement("a");e.download=this.file.name,e.href=this.downloadUrl,document.body.appendChild(e),e.click(),document.body.removeChild(e),this.closeMenu()},openMenu:function(e,t){this.file=t,this.viewMenu=!0,this.canPreview=void 0!==t.preview||!0===t.isFolder,this.name=t.name,this.downloadUrl=`${this.$store.state.serverUrl}/api/buckets/${this.$store.state.activeBucket}/${gt(t.name,this.$store.state.currentFolder)}`,this.$nextTick(function(){this.$refs.menu.focus(),this.setMenu(e.y,e.x)}.bind(this))},async shareFile(){const e=window.location.origin+this.$router.resolve({name:"storage-file",params:{bucket:this.$route.params.bucket,folder:this.$route.params.folder||"IA==",file:this.file.hash}}).href;try{await navigator.clipboard.writeText(e),this.$store.dispatch("makeToast",{message:"Link to file copied to clipboard!",timeout:5e3}),this.closeMenu()}catch(t){console.error("Failed to copy: ",t)}},deleteFile(){const e=this;Be().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((t=>{t.isConfirmed&&wt.deleteObject(e.file.path,e.file.name).then((()=>{this.$store.dispatch("makeToast",{message:"File deleted",timeout:5e3}),e.$store.dispatch("refreshObjects")})),e.closeMenu()}))},renameFile(){const e=this;Be().fire({title:"Rename file",input:"text",inputValue:e.file.name,showCancelButton:!0,inputValidator:e=>{if(!e)return"You need to write something!"}}).then((t=>{!0===t.isConfirmed&&wt.renameObject(e.file.name,t.value).then((()=>{this.$store.dispatch("makeToast",{message:"File renamed",timeout:5e3}),e.$store.dispatch("refreshObjects")})),e.closeMenu()}))},openFile(){this.$emit("openFile",this.file),this.closeMenu()},notImplemented(){this.$store.dispatch("makeToast",{message:"Not implemented yet",timeout:5e3}),this.closeMenu()}}};const yt=(0,O.Z)(kt,[["render",ut],["__scopeId","data-v-642faa9f"]]);var _t=yt,$t={emits:["navigate"],components:{ContextMenu:_t},methods:{openMenu(e,t){this.$refs.menu.openMenu(e,t,!1,!1,!1)},openFolder(e){this.$store.dispatch("navigate",e.Prefix)}},mounted(){this.$watch((()=>this.$route.params.folder),((e,t)=>{e!==t&&"storage"===this.$store.state.activeTab&&(e&&"IA=="!==e?this.$store.dispatch("navigateToHash",e):this.$store.dispatch("navigate",""))}))}};const xt=(0,O.Z)($t,[["render",Ve]]);var Dt=xt;const Ft=e=>((0,o.dD)("data-v-6d893fe4"),e=e(),(0,o.Cn)(),e),Tt={key:0,class:"mb-3 mobile-adjust"},Ct={class:"table-responsive table-files"},Mt={class:"table table-centered mb-0"},Ut=Ft((()=>(0,o._)("thead",{class:"table-light"},[(0,o._)("tr",null,[(0,o._)("th",{class:"border-0"},"Name"),(0,o._)("th",{class:"border-0"},"Last Modified"),(0,o._)("th",{class:"border-0 d-none d-lg-table-cell"},"Size")])],-1))),jt=["onClick","onContextmenu"],It={class:"col-name"},Ot={class:"ms-2 fw-semibold"},St=["textContent"],Ht={class:"d-none d-lg-table-cell"},zt={key:1},Bt=Ft((()=>(0,o._)("td",{colspan:"100%"},[(0,o._)("div",{class:"empty-list"},[(0,o._)("span",{class:"title"},"This Folder is empty"),(0,o._)("span",{class:"desc"},"Drag and Drop files to upload")])],-1))),Lt=[Bt];function Et(e,t,a,n,r,i){const l=(0,o.up)("file-preview"),c=(0,o.up)("context-menu");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.$store.state.files.length>0?((0,o.wg)(),(0,o.iD)("h5",Tt,"Files")):(0,o.kq)("",!0),(0,o._)("div",Ct,[(0,o._)("table",Mt,[Ut,(0,o._)("tbody",null,[e.$store.state.files.length>0?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:0},(0,o.Ko)(e.$store.state.files,(e=>((0,o.wg)(),(0,o.iD)("tr",{class:(0,u.C_)({pointer:e.preview}),onClick:t=>e.preview?i.openFile(e):null,key:e.key,onContextmenu:(0,s.iM)((t=>i.openMenu(t,e)),["prevent"])},[(0,o._)("td",It,[(0,o._)("i",{class:(0,u.C_)(["bi bi-file font-16","bi-filetype-"+e.extension])},null,2),(0,o._)("span",Ot,[(0,o._)("span",{class:"text-reset",textContent:(0,u.zw)(e.name)},null,8,St)])]),(0,o._)("td",null,(0,u.zw)(i.timeAgo(e.uploaded))+" ago",1),(0,o._)("td",Ht,(0,u.zw)(i.bytesToSize(e.size)),1)],42,jt)))),128)):((0,o.wg)(),(0,o.iD)("tr",zt,Lt))])]),(0,o.Wm)(l,{ref:"preview"},null,512),(0,o.Wm)(c,{ref:"menu",onOpenFile:i.openFile},null,8,["onOpenFile"])])],64)}var Pt={timeSince:e=>{const t=Math.floor((new Date-e)/1e3);let a,s=t/31536e3;return s>1?(a=Math.floor(s),a+(1===a?" year":" years")):(s=t/2592e3,s>1?(a=Math.floor(s),a+(1===a?" month":" months")):(s=t/86400,s>1?(a=Math.floor(s),a+(1===a?" day":" days")):(s=t/3600,s>1?(a=Math.floor(s),a+(1===a?" hour":" hours")):(s=t/60,s>1?(a=Math.floor(s),a+(1===a?" minute":" minutes")):(a=Math.floor(s),a+(1===a?" second":" seconds"))))))},bytesToSize:e=>{const t=["Bytes","KB","MB","GB","TB"];if(0===e)return"0 Byte";const a=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,a),2)+" "+t[a]},bytesToMegabytes:e=>Math.round(e/Math.pow(1024,2))};const At=(0,o._)("h4",{class:"text-center"},"Loading File",-1),Wt={class:"progress mb-2"},Yt=["aria-valuenow"],qt=["src"],Zt={key:2,class:"text-center"},Rt={controls:""},Nt=["src"],Vt=(0,o.Uk)(" Your browser does not support the audio element. "),Kt={key:3,class:"text-center"},Jt={controls:"",style:{"max-width":"100%",height:"auto"}},Gt=["src"],Xt=(0,o.Uk)(" Your browser does not support the video tag. "),Qt=["innerHTML"],ea=["innerHTML"],ta=["innerHTML"],aa=["innerHTML"],sa=["innerHTML"],oa={key:11,class:"text-center"};function na(e,t,a,s,n,r){const i=(0,o.up)("pdf-viewer"),l=(0,o.up)("log-gz"),c=(0,o.up)("email-viewer"),d=(0,o.up)("modal");return void 0!==e.type?((0,o.wg)(),(0,o.j4)(d,{key:0,show:void 0!==e.type,onClose:r.close},{"header-title":(0,o.w5)((()=>[(0,o.Uk)((0,u.zw)(e.filename),1)])),body:(0,o.w5)((()=>[void 0===e.fileData?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[At,(0,o._)("div",Wt,[(0,o._)("div",{class:"progress-bar bg-success progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":e.downloadProgress||0,"aria-valuemin":"0","aria-valuemax":"100",style:(0,u.j5)({width:`${e.downloadProgress||0}%`})},null,12,Yt)])],64)):((0,o.wg)(),(0,o.iD)(o.HY,{key:1},["pdf"===e.type?((0,o.wg)(),(0,o.j4)(i,{key:0,pdfUrl:e.fileData},null,8,["pdfUrl"])):"image"===e.type?((0,o.wg)(),(0,o.iD)("img",{key:1,src:e.fileData,class:"preview-image"},null,8,qt)):"audio"===e.type?((0,o.wg)(),(0,o.iD)("div",Zt,[(0,o._)("audio",Rt,[(0,o._)("source",{src:e.fileData},null,8,Nt),Vt])])):"video"===e.type?((0,o.wg)(),(0,o.iD)("div",Kt,[(0,o._)("video",Jt,[(0,o._)("source",{src:e.fileData},null,8,Gt),Xt])])):"text"===e.type?((0,o.wg)(),(0,o.iD)("div",{key:4,innerHTML:e.fileData.replaceAll("\n","<br>")},null,8,Qt)):"json"===e.type?((0,o.wg)(),(0,o.iD)("pre",{key:5,innerHTML:JSON.stringify(e.fileData,null,2)},null,8,ea)):"html"===e.type?((0,o.wg)(),(0,o.iD)("pre",{key:6,innerHTML:e.fileData},null,8,ta)):"markdown"===e.type?((0,o.wg)(),(0,o.iD)("div",{key:7,class:"markdown",innerHTML:r.markdownParser(e.fileData)},null,8,aa)):"csv"===e.type?((0,o.wg)(),(0,o.iD)("div",{key:8,class:"markdown",innerHTML:r.csvParser(e.fileData)},null,8,sa)):"logs"===e.type?((0,o.wg)(),(0,o.j4)(l,{key:9,filedata:e.fileData},null,8,["filedata"])):"email"===e.type?((0,o.wg)(),(0,o.j4)(c,{key:10,filedata:e.fileData},null,8,["filedata"])):((0,o.wg)(),(0,o.iD)("h4",oa,"Unsupported file type"))],64))])),_:1},8,["show","onClose"])):(0,o.kq)("",!0)}const ra={id:"pdfvuer"},ia=(0,o.Uk)(" loading content here... ");function la(e,t,a,s,n,r){const i=(0,o.up)("pdf");return(0,o.wg)(),(0,o.iD)("div",ra,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.numPages,(e=>((0,o.wg)(),(0,o.j4)(i,{src:n.pdfdata,key:e,id:e,page:e,scale:n.scale,"onUpdate:scale":t[0]||(t[0]=e=>n.scale=e),style:{width:"100%",margin:"20px auto"},annotation:!0,resize:!0},{loading:(0,o.w5)((()=>[ia])),_:2},1032,["src","id","page","scale"])))),128))])}var ca=a(5580),da={components:{pdf:ca.Z},props:["pdfUrl"],data(){return{page:1,numPages:0,pdfdata:void 0,errors:[],scale:"page-width"}},mounted(){this.getPdf()},methods:{getPdf(){const e=this;e.pdfdata=ca.Z.createLoadingTask(this.pdfUrl),e.pdfdata.then((t=>{e.numPages=t.numPages}))}}};const ua=(0,O.Z)(da,[["render",la],["__scopeId","data-v-40738e68"]]);var pa=ua;const ma={class:"modal-dialog modal-lg modal-dialog-scrollable",role:"document"},fa={class:"modal-content"},ha={class:"modal-header"},ga={class:"modal-title"},ba=(0,o.Uk)("Title"),va=(0,o._)("span",{"aria-hidden":"true"},null,-1),wa=[va],ka={class:"modal-body"},ya=(0,o.Uk)("default body"),_a={class:"modal-footer"};function $a(e,t,a,s,n,r){return a.show?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"modal-mask",onClick:t[2]||(t[2]=(...e)=>r.handleBackdropClick&&r.handleBackdropClick(...e))},[(0,o._)("div",ma,[(0,o._)("div",fa,[(0,o._)("div",ha,[(0,o.WI)(e.$slots,"header",{},(()=>[(0,o._)("h5",ga,[(0,o.WI)(e.$slots,"header-title",{},(()=>[ba]))]),(0,o._)("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=t=>e.$emit("close"))},wa)]))]),(0,o._)("div",ka,[(0,o.WI)(e.$slots,"body",{},(()=>[ya]))]),(0,o._)("div",_a,[(0,o.WI)(e.$slots,"footer-buttons"),(0,o._)("button",{type:"button",class:"btn btn-secondary",onClick:t[1]||(t[1]=t=>e.$emit("close"))},"Close")])])])])):(0,o.kq)("",!0)}var xa={props:{show:Boolean},methods:{handleBackdropClick(e){e.target.classList.contains("modal-mask")&&this.$emit("close")}}};const Da=(0,O.Z)(xa,[["render",$a]]);var Fa=Da;const Ta=function(e,t){return function(a){return a.replace(e,t)}},Ca=/((\n\t)(.*))+/g,Ma=/(`)(.*?)\1/g,Ua=/!\[([^\[]+)\]\(([^\)]+)\)/g,ja=/\[([^\[]+)\]\(([^\)]+)\)/g,Ia=/\n(#+\s*)(.*)/g,Oa=/(\*{1,2})(.*?)\1/g,Sa=/(\~\~)(.*?)\1/g,Ha=/\n(&gt;|\>)(.*)/g,za=/\n((\-{3,})|(={3,}))/g,Ba=/(\n\s*(\-|\+)\s.*)+/g,La=/(\n\s*([0-9]+\.)\s.*)+/g,Ea=/\n+(?!<pre>)(?!<h)(?!<ul>)(?!<blockquote)(?!<hr)(?!\t)([^\n]+)\n/g,Pa=function(e){return"\n<pre>"+e+"</pre>"},Aa=function(e,t,a){return"<code>"+a+"</code>"},Wa=function(e,t,a){return'<img src="'+a+'" alt="'+t+'" />'},Ya=function(e,t,a){return'<a href="'+a+'">'+t+"</a>"},qa=function(e,t,a){return"\n<h"+t.trim().length+">"+a+"</h"+t.trim().length+">"},Za=function(e,t,a){return"<"+(1==t.trim().length?"em":"strong")+">"+a+"</"+(1==t.trim().length?"em":"strong")+">"},Ra=function(e,t,a){return"<del>"+a+"</del>"},Na=function(e,t,a){return"\n<blockquote>"+a+"</blockquote>"},Va=function(e){return"\n<hr />"},Ka=function(e){let t="";return e.trim().split("\n").forEach((e=>{t+="<li>"+e.substring(2)+"</li>"})),"\n<ul>"+t+"</ul>"},Ja=function(e){let t="";return e.trim().split("\n").forEach((e=>{t+="<li>"+e.substring(e.indexOf(".")+2)+"</li>"})),"\n<ol>"+t+"</ol>"},Ga=function(e,t){return"<p>"+t+"</p>"},Xa=Ta(Ca,Pa),Qa=Ta(Ma,Aa),es=Ta(Ua,Wa),ts=Ta(ja,Ya),as=Ta(Ia,qa),ss=Ta(Oa,Za),os=Ta(Sa,Ra),ns=Ta(Ha,Na),rs=Ta(za,Va),is=Ta(Ba,Ka),ls=Ta(La,Ja),cs=Ta(Ea,Ga),ds=/\n(<pre>)((\n|.)*)(<\/pre>)/g,us=function(e,t,a,s,o){let n="";return a.split("\n").forEach((e=>{n+=e.substring(1)+"\n"})),t+n+o},ps=Ta(ds,us),ms=function(e){return cs(ls(is(rs(ns(os(ss(as(ts(es(Qa(Xa(e))))))))))))},fs=function(e){return ps(ms("\n"+e+"\n")).trim()},hs=["innerHTML"];function gs(e,t,a,s,n,r){return e.data?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:0},(0,o.Ko)(e.data,((e,t)=>((0,o.wg)(),(0,o.iD)("pre",{key:t,innerHTML:e},null,8,hs)))),128)):(0,o.kq)("",!0)}var bs=a(3778),vs={props:["filedata"],data:function(){return{data:null}},mounted(){const e=new Uint8Array(this.filedata),t=bs.iF(e),a=bs.T8(t);this.data=a.split("\n").map((e=>{try{return JSON.stringify(JSON.parse(e),null,2)}catch(t){return e}}))}};const ws=(0,O.Z)(vs,[["render",gs]]);var ks=ws;const ys={class:"font-18"},_s=(0,o._)("hr",null,null,-1),$s={class:"d-flex align-items-start mb-2 mt-1"},xs={class:"w-100"},Ds={class:"float-end"},Fs={class:"text-muted"},Ts={class:"w-100"},Cs={class:"text-muted"},Ms=(0,o.Uk)("To: "),Us={key:0,class:"mb-3"},js=(0,o._)("br",null,null,-1),Is=["innerHTML"],Os=(0,o._)("hr",null,null,-1),Ss=["open"],Hs=(0,o._)("summary",null,"Text",-1),zs=(0,o._)("br",null,null,-1),Bs=["innerHTML"],Ls=(0,o._)("hr",null,null,-1),Es={class:"mb-3"},Ps={class:"text-muted"},As={key:1,class:"text-center"},Ws=(0,o._)("div",{class:"lds-dual-ring"},null,-1),Ys=[Ws];function qs(e,t,a,s,n,r){return e.emailData?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("h5",ys,(0,u.zw)(e.emailData.subject),1),_s,(0,o._)("div",$s,[(0,o._)("div",xs,[(0,o._)("small",Ds,(0,u.zw)(e.emailData.date),1),(0,o._)("small",Fs,"From: "+(0,u.zw)(e.emailData.from?.name)+" <"+(0,u.zw)(e.emailData.from?.address)+">",1)])]),(0,o._)("div",Ts,[(0,o._)("small",Cs,[Ms,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.emailData.to,(e=>((0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Uk)((0,u.zw)(e.name)+" <"+(0,u.zw)(e.address)+">; ",1)],64)))),256))])]),e.emailData.html||e.emailData.text?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("h5",Us,"This email has no HTML or text content")),e.emailData.html?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[js,(0,o._)("div",{class:"overflow-auto",innerHTML:e.emailData.htmlAsText.replaceAll("\n","<br>")},null,8,Is),Os],64)):(0,o.kq)("",!0),e.emailData.text?((0,o.wg)(),(0,o.iD)(o.HY,{key:2},[(0,o._)("details",{open:e.emailData.html?void 0:"open"},[Hs,zs,(0,o._)("div",{class:"overflow-auto",innerHTML:e.emailData.text.replaceAll("\n","<br>")},null,8,Bs)],8,Ss),Ls],64)):(0,o.kq)("",!0),e.emailData.attachments?.length>0?((0,o.wg)(),(0,o.iD)(o.HY,{key:3},[(0,o._)("h5",Es,"This email has "+(0,u.zw)(e.emailData.attachments.length)+" attachment(s):",1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.emailData.attachments,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"w-100",key:e.filename},[(0,o._)("small",Ps,(0,u.zw)(e.filename),1)])))),128))],64)):(0,o.kq)("",!0)],64)):((0,o.wg)(),(0,o.iD)("div",As,Ys))}const Zs=a(126),{convert:Rs}=a(1024);var Ns={props:["filedata"],data:function(){return{emailData:null}},methods:{async parseEmail(){try{const e=new Zs.default,t=await e.parse(this.filedata);this.emailData=t,t.html&&(this.emailData.htmlAsText=Rs(t.html,{}))}catch(e){console.error("Error parsing email data:",e)}}},async mounted(){await this.parseEmail()}};const Vs=(0,O.Z)(Ns,[["render",qs]]);var Ks=Vs,Js={components:{LogGz:ks,PdfViewer:pa,EmailViewer:Ks,modal:Fa},data:function(){return{downloadProgress:0,abortControl:void 0,type:void 0,filename:void 0,fileData:void 0}},methods:{openFile(e){Pt.bytesToMegabytes(e.size)>200?this.$store.dispatch("makeToast",{message:"File is too big to preview",timeout:5e3}):(this.abortControl=new AbortController,void 0===this.$route.params.file&&this.$router.push({name:"storage-file",params:{bucket:this.$route.params.bucket,folder:this.$route.params.folder||"IA==",file:e.hash}}),this.type=e.preview.type,wt.downloadFile(e,(e=>{this.downloadProgress=100*e.loaded/e.total}),this.abortControl).then((t=>{let a;if("objectUrl"===e.preview.downloadType){const e=new Blob([t.data]);a=URL.createObjectURL(e)}else a=(e.preview.downloadType,t.data);const s={...e,data:a};this.type=s.preview?.type,this.fileData=s.data,this.filename=s.name})))},close(){this.abortControl&&this.abortControl.abort(),this.$route.params.file&&this.$router.push({name:"storage-folder",params:{bucket:this.$route.params.bucket,folder:this.$route.params.folder||"IA=="}}),this.type=void 0,this.fileData=void 0,this.filename=void 0,this.abortControl=void 0,this.downloadProgress=0},markdownParser(e){return fs(e)},csvParser:function(e){let t="";const a=e.split("\n");if(0===a.length)return"<h2>Empty csv</h2>";for(const[s,o]of a.entries()){let e="";const a=o.split(/(\s*"[^"]+"\s*|\s*[^,]+|,)(?=,|$)/g).filter((e=>""!==e&&","!==e));for(const t of a)e+=0===s?`<th>${t.replaceAll('"',"")}</th>`:`<td>${t.replaceAll('"',"")}</td>`;t+=`<tr>${e}</tr>`}return`<table class="table">${t}</table>`}}};const Gs=(0,O.Z)(Js,[["render",na]]);var Xs=Gs,Qs={methods:{openMenu(e,t){this.$refs.menu.openMenu(e,t)},timeAgo(e){return Pt.timeSince(new Date(e))},bytesToSize(e){return Pt.bytesToSize(e)},openFile(e){this.$refs.preview.openFile(e)}},components:{ContextMenu:_t,FilePreview:Xs},mounted(){const e=this;_e.$on("openFile",(t=>{if("storage"===this.$store.state.activeTab)for(const a of e.$store.state.files)if(a.name===t)return void e.openFile(a)}))},beforeUnmount(){_e.$off("newFolder")}};const eo=(0,O.Z)(Qs,[["render",Et],["__scopeId","data-v-6d893fe4"]]);var to=eo;const ao={class:"breadcrumb m-0 folder-tree"},so={class:"breadcrumb-item"};function oo(e,t,a,s,n,r){const i=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("ol",ao,[(0,o._)("li",so,[e.$route.params.bucket?((0,o.wg)(),(0,o.j4)(i,{key:0,textContent:(0,u.zw)(e.$store.state.activeBucket),to:{name:"storage-home",params:{bucket:e.$route.params.bucket}}},null,8,["textContent","to"])):(0,o.kq)("",!0)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.tree,((t,a)=>((0,o.wg)(),(0,o.iD)("li",{key:a,class:(0,u.C_)(["breadcrumb-item",{active:a===r.tree.length-1}])},[(0,o.Wm)(i,{textContent:(0,u.zw)(t.name),to:{name:"storage-folder",params:{bucket:e.$route.params.bucket,folder:t.hash}}},null,8,["textContent","to"])],2)))),128))])}var no={computed:{tree(){if(!this.$store.state.currentFolder)return[];const e=this.$store.state.currentFolder.split("/").filter((e=>""!==e));let t="";return e.map((e=>(t+=e+"/",{name:e,path:t,hash:btoa(unescape(encodeURIComponent(t)))})))}}};const ro=(0,O.Z)(no,[["render",oo],["__scopeId","data-v-3528720f"]]);var io=ro,lo={components:{FolderTree:io,Files:to,Folders:Dt}};const co=(0,O.Z)(lo,[["render",Pe],["__scopeId","data-v-561235b8"]]);var uo=co;const po=(0,o._)("div",{class:"drop-files"},[(0,o._)("div",{class:"box"},[(0,o._)("h3",null,"Drop files to upload"),(0,o._)("span",{class:"font-28"},[(0,o._)("i",{class:"bi bi-cloud-upload-fill"})])])],-1);function mo(e,t,a,n,r,i){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",{ref:"dragContainer",class:(0,u.C_)(["upload-box",{active:e.isHover}]),onDragover:t[0]||(t[0]=(0,s.iM)(((...e)=>i.dragover&&i.dragover(...e)),["prevent"])),onDragleave:t[1]||(t[1]=(0,s.iM)(((...e)=>i.dragleave&&i.dragleave(...e)),["prevent"])),onDrop:t[2]||(t[2]=(0,s.iM)(((...e)=>i.drop&&i.drop(...e)),["prevent"]))},[(0,o.WI)(e.$slots,"default"),po],34),(0,o._)("input",{style:{display:"none"},onChange:t[3]||(t[3]=(...e)=>i.inputFiles&&i.inputFiles(...e)),type:"file",name:"files[]",ref:"filesUploader",multiple:""},null,544),(0,o._)("input",{style:{display:"none"},onChange:t[4]||(t[4]=(...e)=>i.inputFolders&&i.inputFolders(...e)),type:"file",webkitdirectory:"",name:"files[]",ref:"foldersUploader",multiple:""},null,544)],64)}var fo={data:function(){return{isHover:!1,filelist:[],dragContainer:{top:0,bottom:0,left:0,right:0}}},methods:{openFilesUploader(){this.$refs.filesUploader.click()},openFoldersUploader(){this.$refs.foldersUploader.click()},dragover(e){if(this.$store.state.config?.readonly)return;const t=this.$refs.dragContainer.getBoundingClientRect();this.dragContainer={top:t.top,bottom:t.bottom,left:t.left,right:t.right},this.isHover=!0},dragleave(e){(e.clientX<this.dragContainer.left||e.clientX>this.dragContainer.right||e.clientY>this.dragContainer.bottom||e.clientY<this.dragContainer.top)&&(this.isHover=!1)},inputFiles(e){this.uploadFiles({"":e.target.files})},inputFolders(e){const t={};for(const a of e.target.files){const e=a.webkitRelativePath.lastIndexOf("/"),s=a.webkitRelativePath.slice(0,e);void 0===t[s]&&(t[s]=[]),t[s].push(a)}this.uploadFiles(t)},async uploadFiles(e){const t=this;let a=0;const s=[];for(const[n,r]of Object.entries(e)){""!==n&&wt.createFolder(n),a+=r.length;for(const e of r)s.push(e.name)}t.$store.dispatch("refreshObjects"),t.$store.dispatch("addUploadingFiles",s);let o=0;for(const[n,r]of Object.entries(e)){let e=n;t.$store.state.currentFolder&&(e=""!==n?t.$store.state.currentFolder+n:t.$store.state.currentFolder);for(const a of r){o+=1;const s=99614720;if(a.size>s){const{uploadId:o,key:n}=(await wt.multipartCreate(a,e)).data;let r=1;const i=[];for(let e=0;e<a.size;e+=s){const l=Math.min(e+s,a.size),c=a.slice(e,l),{data:d}=await wt.multipartUpload(o,r,n,c,(s=>{t.$store.dispatch("setUploadProgress",{filename:a.name,progress:100*(e+s.loaded)/a.size})}));i.push(d),r+=1}await wt.multipartComplete(a,e,i,o)}else await wt.uploadObjects(a,e,(e=>{t.$store.dispatch("setUploadProgress",{filename:a.name,progress:100*e.loaded/a.size})}))}}t.$store.dispatch("refreshObjects")},async traverseFileTree(e,t,a,s){const o=this;if(t=t||"",e.isFile&&s>0){const s=new Promise((function(s,o){e.file((function(e){a[t].push(e),s()}))}));await s}else if(e.isDirectory){const n=t?t+"/"+e.name:e.name;void 0===a[n]&&(a[n]=[]);const r=e.createReader(),i=new Promise((function(e,t){r.readEntries((async function(t){for(let e=0;e<t.length;e++)await o.traverseFileTree(t[e],n,a,s+1);e()}))}));await i}},async drop(e){if(!this.isHover)return;const t=e.dataTransfer.files,a=await e.dataTransfer.items,s={};for(const n of a){const e=n.webkitGetAsEntry();e&&await this.traverseFileTree(e,"",s,0)}const o=[];for(const n of t)void 0===s[n.name]&&o.push(n);s[""]=o,this.uploadFiles(s),this.isHover=!1}}};const ho=(0,O.Z)(fo,[["render",mo]]);var go=ho;const bo={key:0,class:"toast-loading"},vo={key:0,class:"spinner-border"},wo={key:1,class:"bi bi-check-circle-fill me-1"};function ko(e,t){return e.$store.state.toastMessage?((0,o.wg)(),(0,o.iD)("div",bo,[e.$store.state.toastSpin?((0,o.wg)(),(0,o.iD)("div",vo)):((0,o.wg)(),(0,o.iD)("i",wo)),(0,o.Uk)(" "+(0,u.zw)(e.$store.state.toastMessage),1)])):(0,o.kq)("",!0)}const yo={},_o=(0,O.Z)(yo,[["render",ko],["__scopeId","data-v-aeb97650"]]);var $o=_o;const xo=e=>((0,o.dD)("data-v-1a42230a"),e=e(),(0,o.Cn)(),e),Do={key:0,class:"uploading-popup"},Fo={class:"card"},To={class:"card-header d-flex flex-row"},Co={class:"card-body"},Mo={class:"progress-filename"},Uo={style:{width:"100px"}},jo={key:0,class:"upload-complete"},Io=xo((()=>(0,o._)("i",{class:"bi bi-check-circle-fill"},null,-1))),Oo=[Io],So={key:1,class:"progress ms-2"},Ho=["aria-valuenow"];function zo(e,t,a,s,n,r){return Object.keys(e.$store.state.uploadingFiles).length>0?((0,o.wg)(),(0,o.iD)("div",Do,[(0,o._)("div",Fo,[(0,o._)("div",To,[(0,o.Uk)(" Uploading "+(0,u.zw)(Object.keys(e.$store.state.uploadingFiles).length)+" files ",1),(0,o._)("button",{class:"btn btn-primary btn-xs btn-close",onClick:t[0]||(t[0]=(...e)=>r.close&&r.close(...e))})]),(0,o._)("div",Co,[(0,o._)("table",null,[(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.$store.state.uploadingFiles,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{class:"table-active",key:t},[(0,o._)("td",Mo,(0,u.zw)(t),1),(0,o._)("td",Uo,[100===e.progress?((0,o.wg)(),(0,o.iD)("div",jo,Oo)):((0,o.wg)(),(0,o.iD)("div",So,[(0,o._)("div",{class:"progress-bar bg-success progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":e.progress||0,"aria-valuemin":"0","aria-valuemax":"100",style:(0,u.j5)({width:`${e.progress||0}%`})},null,12,Ho)]))])])))),128))])])])])])):(0,o.kq)("",!0)}var Bo={methods:{close:function(){this.$store.dispatch("clearUploadingFiles")}}};const Lo=(0,O.Z)(Bo,[["render",zo],["__scopeId","data-v-1a42230a"]]);var Eo=Lo;const Po={class:"row"},Ao={class:"col-12"},Wo={class:"card"},Yo={class:"card-body"},qo={class:"d-md-flex justify-content-between align-items-center mobile-adjust"},Zo={class:"d-flex flex-row"},Ro={class:"m-1 m-sm-0"},No={class:"card h-100"};function Vo(e,t,a,s,n,r){const i=(0,o.up)("folder-tree");return(0,o.wg)(),(0,o.iD)("div",Po,[(0,o._)("div",Ao,[(0,o._)("div",Wo,[(0,o._)("div",Yo,[(0,o._)("div",qo,[(0,o._)("div",Zo,[(0,o._)("button",{type:"button",class:(0,u.C_)(["btn btn-app",{active:"storage"===e.$store.state.activeTab}]),onClick:t[0]||(t[0]=(...e)=>r.changeToStorage&&r.changeToStorage(...e))}," Storage ",2),(0,o._)("button",{type:"button",class:(0,u.C_)(["btn btn-app ms-2",{active:"email"===e.$store.state.activeTab}]),onClick:t[1]||(t[1]=(...e)=>r.changeToEmail&&r.changeToEmail(...e))},"Email ",2)]),(0,o._)("div",Ro,[(0,o.Wm)(i)])])])]),(0,o._)("div",No,[(0,o.WI)(e.$slots,"default",{},void 0,!0)])])])}var Ko={components:{FolderTree:io},methods:{changeToStorage(){this.$store.commit("changeTab","storage"),this.$router.push({name:"storage-home",params:{bucket:this.$route.params.bucket}}),localStorage.setItem("lastOpenTab",JSON.stringify({name:"storage-home",params:{bucket:this.$route.params.bucket}}))},changeToEmail(){this.$store.commit("changeTab","email"),this.$router.push({name:"email-folder",params:{bucket:this.$route.params.bucket,folder:"inbox"}}),localStorage.setItem("lastOpenTab",JSON.stringify({name:"email-home",params:{bucket:this.$route.params.bucket}}))}},async created(){this.$route.params.bucket&&(this.$store.commit("changeBucket",this.$route.params.bucket),this.$route.params.folder?("IA=="!==this.$route.params.folder?"email"===this.$store.state.activeTab?(await this.$store.dispatch("navigate",this.$route.params.folder),await this.$store.dispatch("refreshObjects")):await this.$store.dispatch("navigate",decodeURIComponent(escape(atob(this.$route.params.folder)))):await this.$store.dispatch("refreshObjects"),this.$route.params.file&&_e.$emit("openFile",decodeURIComponent(escape(atob(this.$route.params.file))))):this.$store.dispatch("refreshObjects")),this.$watch((()=>this.$route.params.bucket),((e,t)=>{if(e&&e!==t){this.$store.commit("changeBucket",e),this.$store.dispatch("refreshObjects"),this.$store.commit("toggleMobileSidebar",!1);const t=localStorage.getItem("lastOpenTab");if(t){const a=JSON.parse(t);localStorage.setItem("lastOpenTab",JSON.stringify({...a,params:{...a.params,bucket:e}}))}}}))}};const Jo=(0,O.Z)(Ko,[["render",Vo],["__scopeId","data-v-2c3ada22"]]);var Go=Jo,Xo={components:{BucketExplorerWrapper:Go,UploadingPopup:Eo,Loading:$o,DragAndDrop:go,Gallery:uo},methods:{newFolder(){const e=this;Be().fire({title:"New folder",input:"text",showCancelButton:!0,inputValidator:e=>{if(!e)return"You need to write something!"}}).then((t=>{!0===t.isConfirmed&&wt.createFolder(t.value).then((t=>{e.$store.dispatch("refreshObjects"),this.$store.dispatch("makeToast",{message:"Folder created",timeout:5e3})}))}))}},mounted(){const e=this;_e.$on("newFolder",(()=>{e.newFolder()})),_e.$on("openFilesUploader",(()=>{e.$refs.uploader.openFilesUploader()})),_e.$on("openFoldersUploader",(()=>{e.$refs.uploader.openFoldersUploader()}))},beforeUnmount(){_e.$off("newFolder"),_e.$off("openFilesUploader"),_e.$off("openFoldersUploader")},created(){this.$store.commit("changeTab","storage")}};const Qo=(0,O.Z)(Xo,[["render",He]]);var en=Qo;const tn={class:"card-body"},an=(0,o._)("div",{class:"clearfix"},null,-1);function sn(e,t,a,s,n,r){const i=(0,o.up)("email-side-bar"),l=(0,o.up)("email-list"),c=(0,o.up)("bucket-explorer-wrapper");return(0,o.wg)(),(0,o.j4)(c,null,{default:(0,o.w5)((()=>[(0,o._)("div",tn,[(0,o.Wm)(i),(0,o._)("div",null,[(0,o.Wm)(l)]),an])])),_:1})}function on(e,t){return null}const nn={},rn=(0,O.Z)(nn,[["render",on]]);var ln=rn;const cn=e=>((0,o.dD)("data-v-460ba04f"),e=e(),(0,o.Cn)(),e),dn={class:"btn-group"},un=cn((()=>(0,o._)("i",{class:"bi bi-arrow-clockwise"},null,-1))),pn=[un],mn={class:"table-files"},fn={key:0,class:"table table-centered mb-0 d-block w-100"},hn={class:"d-flex flex-column"},gn=["onClick"],bn={class:"col-name col-sender"},vn={class:"ms-sm-2 sender"},wn={class:"mobile-subject"},kn={class:"col-subject"},yn={class:"ms-2"},_n={class:"col-time"},$n={key:0,class:"bi bi-paperclip"},xn={key:1,class:"table table-centered mb-0"},Dn=cn((()=>(0,o._)("tbody",{class:""},[(0,o._)("tr",null,[(0,o._)("td",{colspan:"100%"},[(0,o._)("div",{class:"text-center"},[(0,o._)("p",{class:"fs-3"},"This bucket don't have any emails yet!"),(0,o._)("p",{class:"fs-5"},"Learn how to setup the Email Explorer in the official documentation"),(0,o._)("a",{target:"_blank",href:"https://r2explorer.dev/guides/setup-email-explorer/",class:"fs-5"},"https://r2explorer.dev")])])])],-1))),Fn=[Dn];function Tn(e,t,a,s,n,r){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",dn,[(0,o._)("button",{class:"btn btn-sm btn-light waves-effect",onClick:t[0]||(t[0]=t=>e.$store.dispatch("refreshObjects"))},pn)]),(0,o._)("div",mn,[e.$store.state.files.length>0?((0,o.wg)(),(0,o.iD)("table",fn,[(0,o._)("tbody",hn,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.$store.state.files,(t=>((0,o.wg)(),(0,o.iD)("tr",{class:(0,u.C_)(["pointer email-row",{unread:"true"!==t.customMetadata.read,read:"true"===t.customMetadata.read}]),key:t.key,onClick:a=>e.$router.push({name:"email-file",params:{bucket:this.$route.params.bucket,folder:"inbox",file:t.hash}})},[(0,o._)("td",bn,[(0,o._)("span",vn,(0,u.zw)(t.customMetadata.from_name||t.customMetadata.from_address),1),(0,o._)("span",wn,(0,u.zw)(t.customMetadata.subject),1)]),(0,o._)("td",kn,[(0,o._)("span",yn,(0,u.zw)(t.customMetadata.subject),1)]),(0,o._)("td",_n,["true"===t.customMetadata.has_attachments?((0,o.wg)(),(0,o.iD)("i",$n)):(0,o.kq)("",!0),(0,o.Uk)(" "+(0,u.zw)(r.getEmailDate(t.uploaded)),1)])],10,gn)))),128))])])):((0,o.wg)(),(0,o.iD)("table",xn,Fn))])],64)}var Cn={data:function(){return{timeInterval:null}},methods:{timeAgo(e){return Pt.timeSince(new Date(e))},getEmailDate(e){const t=new Date(e),a=t.getMonth()+1,s=t.getDate();return`${s}/${(a>9?"":"0")+a}`}},unmounted(){clearInterval(this.timeInterval),this.timeInterval=null},created(){const e=this;this.timeInterval=setInterval((()=>{e.$store.dispatch("refreshObjects")}),3e5),this.$watch((()=>this.$route.params.folder),(e=>{"email"===this.$store.state.activeTab&&this.$store.dispatch("refreshObjects")}))}};const Mn=(0,O.Z)(Cn,[["render",Tn],["__scopeId","data-v-460ba04f"]]);var Un=Mn,jn={components:{EmailList:Un,EmailSideBar:ln,BucketExplorerWrapper:Go},created(){this.$store.commit("changeTab","email"),void 0===this.$route.params.folder&&this.$router.push({name:"email-folder",params:{bucket:this.$route.params.bucket,folder:"inbox"}})}};const In=(0,O.Z)(jn,[["render",sn]]);var On=In;const Sn={class:"card-body"},Hn=(0,o._)("div",{class:"clearfix"},null,-1);function zn(e,t,a,s,n,r){const i=(0,o.up)("email-side-bar"),l=(0,o.up)("email-details"),c=(0,o.up)("bucket-explorer-wrapper");return(0,o.wg)(),(0,o.j4)(c,null,{default:(0,o.w5)((()=>[(0,o._)("div",Sn,[(0,o.Wm)(i),(0,o._)("div",null,[(0,o.Wm)(l)]),Hn])])),_:1})}const Bn=e=>((0,o.dD)("data-v-32c3a059"),e=e(),(0,o.Cn)(),e),Ln={key:0},En={class:"btn-group"},Pn=Bn((()=>(0,o._)("i",{class:"bi bi-arrow-return-left"},null,-1))),An={class:"font-18"},Wn=Bn((()=>(0,o._)("hr",null,null,-1))),Yn={class:"d-flex align-items-start mb-3 mt-1"},qn=Bn((()=>(0,o._)("i",{class:"bi bi-person-circle fs-3 me-2"},null,-1))),Zn={class:"w-100"},Rn={class:"float-end"},Nn={class:"m-0 font-14"},Vn={class:"text-muted"},Kn={class:"overflow-auto d-block email-wrapper"},Jn=["srcdoc"],Gn=["innerHTML"],Xn=Bn((()=>(0,o._)("hr",null,null,-1))),Qn=Bn((()=>(0,o._)("h5",{class:"mb-3"},"Attachments",-1))),er={class:"row"},tr={class:"card mb-1 shadow-none border"},ar={class:"p-2"},sr={class:"row align-items-center"},or={class:"col-auto"},nr={class:"avatar-sm"},rr={class:"avatar-title bg-soft-primary text-primary rounded"},ir={class:"col ps-0"},lr={class:"text-muted fw-bold"},cr={class:"col-auto"},dr=["href"],ur=Bn((()=>(0,o._)("i",{class:"bi bi-download"},null,-1))),pr=[ur],mr={key:1,class:"text-center"},fr=Bn((()=>(0,o._)("div",{class:"lds-dual-ring"},null,-1))),hr=[fr];function gr(e,t,a,s,n,r){const i=(0,o.up)("router-link");return this.file?((0,o.wg)(),(0,o.iD)("div",Ln,[(0,o._)("div",En,[(0,o.Wm)(i,{class:"btn btn-sm btn-light waves-effect",to:{name:"email-folder",params:{bucket:e.$route.params.bucket,folder:e.$route.params.folder}}},{default:(0,o.w5)((()=>[Pn])),_:1},8,["to"])]),(0,o._)("h5",An,(0,u.zw)(e.file.subject),1),Wn,(0,o._)("div",Yn,[qn,(0,o._)("div",Zn,[(0,o._)("small",Rn,(0,u.zw)(e.file.date),1),(0,o._)("h6",Nn,(0,u.zw)(e.file.from.name),1),(0,o._)("small",Vn,"From: "+(0,u.zw)(e.file.from.address),1)])]),(0,o._)("div",Kn,[e.file.html?((0,o.wg)(),(0,o.iD)("iframe",{key:0,frameborder:"0",scrolling:"no",class:"w-100 d-block",onLoad:t[0]||(t[0]=(...e)=>r.contentFinishedLoading&&r.contentFinishedLoading(...e)),ref:"renderWindow",srcdoc:e.file.html,sandbox:"allow-popups allow-popups-to-escape-sandbox allow-same-origin",csp:"script-src 'none'"},null,40,Jn)):((0,o.wg)(),(0,o.iD)("div",{key:1,innerHTML:e.file.text.replaceAll("\n","<br>")},null,8,Gn))]),e.file.attachments.length>0?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[Xn,Qn,(0,o._)("div",er,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.file.attachments,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"col-xl-4 col-lg-6 col-md-6",key:e.filename},[(0,o._)("div",tr,[(0,o._)("div",ar,[(0,o._)("div",sr,[(0,o._)("div",or,[(0,o._)("div",nr,[(0,o._)("span",rr," ."+(0,u.zw)(e.filename.split(".").pop()),1)])]),(0,o._)("div",ir,[(0,o._)("span",lr,(0,u.zw)(e.filename),1)]),(0,o._)("div",cr,[(0,o._)("a",{href:e.downloadUrl,class:"btn btn-link btn-lg text-muted"},pr,8,dr)])])])])])))),128))])],64)):(0,o.kq)("",!0)])):((0,o.wg)(),(0,o.iD)("div",mr,hr))}var br={data:function(){return{file:null,timeInterval:null}},methods:{timeAgo(e){return Pt.timeSince(new Date(e))},contentFinishedLoading(){clearInterval(this.timeInterval),this.timeInterval=null,this.resizeIframe()},resizeIframe(){this.$refs.renderWindow.style.height=this.$refs.renderWindow.contentWindow.document.documentElement.scrollHeight+"px"},bytesToSize(e){return Pt.bytesToSize(e)}},async mounted(){const e=this;await this.$store.dispatch("refreshObjects");for(const t of this.$store.state.files)t.hash===this.$route.params.file&&wt.downloadFile(t).then((a=>{const s=t.key.split(".json")[0];for(const t of a.data.attachments)t.downloadUrl=`${e.$store.state.serverUrl}/api/buckets/${e.$store.state.activeBucket}/${btoa(unescape(encodeURIComponent(`${s}/${t.filename}`)))}`;e.file=a.data,e.timeInterval=setInterval((function(){e.resizeIframe()}),400),wt.updateMetadata(t,{...t.customMetadata,read:!0})}))}};const vr=(0,O.Z)(br,[["render",gr],["__scopeId","data-v-32c3a059"]]);var wr=vr,kr={components:{EmailDetails:wr,EmailList:Un,EmailSideBar:ln,BucketExplorerWrapper:Go},created(){this.$store.commit("changeTab","email")}};const yr=(0,O.Z)(kr,[["render",zn]]);var _r=yr;const $r={class:"account-pages mt-5 mb-5"},xr={class:"container"},Dr={class:"row justify-content-center"},Fr={class:"col-md-8 col-lg-6 col-xl-4"},Tr={class:"card"},Cr={class:"card-body p-4"},Mr=(0,o.uE)('<div class="text-center w-75 m-auto"><div class="auth-logo"><a class="logo text-center"><span class="logo-lg-text-dark">R2 Explorer</span></a></div><p class="text-muted mb-4 mt-3">Enter your email address and password to continue.</p></div>',1),Ur={key:0,class:"alert alert-danger"},jr={class:"mb-3"},Ir=(0,o._)("label",{for:"username",class:"form-label"},"Username",-1),Or={class:"mb-3"},Sr=(0,o._)("label",{for:"password",class:"form-label"},"Password",-1),Hr={class:"input-group input-group-merge"},zr=(0,o._)("div",{class:"text-center d-grid"},[(0,o._)("button",{class:"btn btn-primary",type:"submit"}," Log In")],-1);function Br(e,t,a,n,r,i){return(0,o.wg)(),(0,o.iD)("div",$r,[(0,o._)("div",xr,[(0,o._)("div",Dr,[(0,o._)("div",Fr,[(0,o._)("div",Tr,[(0,o._)("div",Cr,[Mr,(0,o._)("form",{onSubmit:t[2]||(t[2]=(0,s.iM)(((...e)=>i.login&&i.login(...e)),["prevent"]))},[e.error?((0,o.wg)(),(0,o.iD)("div",Ur,(0,u.zw)(e.error),1)):(0,o.kq)("",!0),(0,o._)("div",jr,[Ir,(0,o.wy)((0,o._)("input",{class:"form-control",type:"text",id:"username",required:"","onUpdate:modelValue":t[0]||(t[0]=t=>e.username=t),placeholder:"Enter your email"},null,512),[[s.nr,e.username]])]),(0,o._)("div",Or,[Sr,(0,o._)("div",Hr,[(0,o.wy)((0,o._)("input",{type:"password",id:"password",class:"form-control",placeholder:"Enter your password","onUpdate:modelValue":t[1]||(t[1]=t=>e.password=t)},null,512),[[s.nr,e.password]])])]),zr],32)])])])])])])}var Lr={data:function(){return{error:void 0,username:"",password:""}},methods:{async login(){const e=await this.$store.dispatch("tryLogin",{username:this.username,password:this.password});e&&(this.error=e)}}};const Er=(0,O.Z)(Lr,[["render",Br]]);var Pr=Er;const Ar=[{path:"/",name:"home",component:en},{path:"/storage/:bucket",name:"storage-home",component:en},{path:"/storage/:bucket/:folder",name:"storage-folder",component:en},{path:"/storage/:bucket/:folder/:file",name:"storage-file",component:en},{path:"/email/:bucket",name:"email-home",component:On},{path:"/email/:bucket/:folder",name:"email-folder",component:On},{path:"/email/:bucket/:folder/:file",name:"email-file",component:_r},{path:"/auth/login",name:"login",component:Pr}],Wr=(0,Ie.p7)({history:(0,Ie.PO)(),routes:Ar});var Yr=Wr,qr=a(4009),Zr=a.n(qr),Rr=a(5205);(0,Rr.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; refreshing..."),window.location.reload(!0)},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),a(9872),a(7424);let Nr=window.location.origin;mt.commit("setServerUrl",Nr);const Vr=(0,s.ri)(je);Vr.use(mt),Vr.use(Yr),Vr.use(Zr()),Vr.mount("#app")},172:function(){},2001:function(){},3779:function(){},6558:function(){},2258:function(){}},t={};function a(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,s,o,n){if(!s){var r=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],n=e[d][2];for(var i=!0,l=0;l<s.length;l++)(!1&n||r>=n)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(i=!1,n<r&&(r=n));if(i){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[s,o,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,n,r=s[0],i=s[1],l=s[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(l)var d=l(a)}for(t&&t(s);c<r.length;c++)n=r[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(d)},s=self["webpackChunkr2_explorer_dashboard"]=self["webpackChunkr2_explorer_dashboard"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(3812)}));s=a.O(s)})();
//# sourceMappingURL=app.10bced78.js.map